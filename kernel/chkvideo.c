// Fast System Kernel - Check Video Mode Test
// Author: Mario Freire
// Version 0.1
// Copyright (C) 2024 DSP Interactive.

#include <stdint.h>

/*

Register name					port	index	03h		12h		13h		320x240 planar
Mode Control					0x3C0	0x10	0x0C	0x01	0x41	0x41
Overscan Register				0x3C0	0x11	0x00	0x00	0x00	0x00
Color Plane Enable				0x3C0	0x12	0x0F	0x0F	0x0F	0x0F
Horizontal Panning				0x3C0	0x13	0x08	0x00	0x00	0x00
Color Select					0x3C0	0x14	0x00	0x00	0x00	0x00
Miscellaneous Output Register	0x3C2	N/A		0x67	0xE3	0x63	0xE3
Clock Mode Register				0x3C4	0x01	0x00	0x01	0x01	0x01
Character select				0x3C4	0x03	0x00	0x00	0x00	0x00
Memory Mode Register			0x3C4	0x04	0x07	0x02	0x0E	0x06
Mode Register					0x3CE	0x05	0x10	0x00	0x40	0x40
Miscellaneous Register			0x3CE	0x06	0x0E	0x05	0x05	0x05
Horizontal Total				0x3D4	0x00	0x5F	0x5F	0x5F	0x5F
Horizontal Display Enable End	0x3D4	0x01	0x4F	0x4F	0x4F	0x4F
Horizontal Blank Start			0x3D4	0x02	0x50	0x50	0x50	0x50
Horizontal Blank End			0x3D4	0x03	0x82	0x82	0x82	0x82
Horizontal Retrace Start		0x3D4	0x04	0x55	0x54	0x54	0x54
Horizontal Retrace End			0x3D4	0x05	0x81	0x80	0x80	0x80
Vertical Total					0x3D4	0x06	0xBF	0x0B	0xBF	0x0D
Overflow Register				0x3D4	0x07	0x1F	0x3E	0x1F	0x3E
Preset row scan					0x3D4	0x08	0x00	0x00	0x00	0x00
Maximum Scan Line				0x3D4	0x09	0x4F	0x40	0x41	0x41
Vertical Retrace Start			0x3D4	0x10	0x9C	0xEA	0x9C	0xEA
Vertical Retrace End			0x3D4	0x11	0x8E	0x8C	0x8E	0xAC
Vertical Display Enable End		0x3D4	0x12	0x8F	0xDF	0x8F	0xDF
Logical Width					0x3D4	0x13	0x28	0x28	0x28	0x28
Underline Location				0x3D4	0x14	0x1F	0x00	0x40	0x00
Vertical Blank Start			0x3D4	0x15	0x96	0xE7	0x96	0xE7
Vertical Blank End				0x3D4	0x16	0xB9	0x04	0xB9	0x06
Mode Control					0x3D4	0x17	0xA3	0xE3	0xA3	0xE3

*/

#define VGA_AC_INDEX        0x3C0
#define VGA_AC_WRITE        0x3C0
#define VGA_AC_READ         0x3C1
#define VGA_INSTAT_READ     0x3DA
#define VGA_MISC_WRITE      0x3C2
#define VGA_MISC_READ       0x3CC
#define VGA_CRTC_INDEX      0x3D4
#define VGA_CRTC_DATA       0x3D5
#define VGA_CRTM_INDEX      0x3B4
#define VGA_CRTM_DATA       0x3B5
#define VGA_GC_INDEX        0x3CE
#define VGA_GC_DATA         0x3CF
#define VGA_SEQ_INDEX       0x3C4
#define VGA_SEQ_DATA        0x3C5
#define VGA_FTC_R           0x3CA

#define VGA_REGS_SEQ_COUNT    5
#define VGA_REGS_GC_COUNT     9
#define VGA_REGS_AC_COUNT     21
#define VGA_REGS_CRTC_COUNT   25

#define VGA_SEQ_MAP_MASK_REG            0x02
#define VGA_SEQ_CHARSET_REG             0x03
#define VGA_SEQ_MEMORY_MODE_REG         0x04

#define VGA_GC_READ_MAP_SELECT_REG      0x04
#define VGA_GC_GRAPHICS_MODE_REG        0x05
#define VGA_GC_MISC_REG                 0x06

#define VGA_CURSOR_HIGH 0x0E
#define VGA_CURSOR_LOW 0x0F

#define VGA_ADDRESS         0xA0000
#define VGA_TEXT_ADDRESS    0xB8000

#define UINT16(a,b) ((unsigned long)((unsigned char)(a)|((unsigned char)(b)<<8)))


#define VGA_FONT_BYTES_PER_GLYPTH     16
#define VGA_FONT_BYTES_SKIP           16
#define VGA_FONT_CHARSET_LENGTH       256

#define VGA_FONT_SIZE VGA_FONT_CHARSET_LENGTH * VGA_FONT_BYTES_PER_GLYPTH


enum VBE_DEPTHS
{
	VBE_DISPI_BPP_4 = 0x04,
	VBE_DISPI_BPP_8 = 0x08,
	VBE_DISPI_BPP_15 = 0x0F,
	VBE_DISPI_BPP_16 = 0x10,
	VBE_DISPI_BPP_24 = 0x18,
	VBE_DISPI_BPP_32 = 0x20
};

enum VBE_IOPORTS 
{
	VBE_DISPI_IOPORT_INDEX = 0x01CE, VBE_DISPI_IOPORT_DATA = 0x01CF
};

enum VBE_COMMANDS 
{
	VBE_DISPI_INDEX_ID, VBE_DISPI_INDEX_XRES, VBE_DISPI_INDEX_YRES,
	VBE_DISPI_INDEX_BPP, VBE_DISPI_INDEX_ENABLE, VBE_DISPI_INDEX_BANK,
	VBE_DISPI_INDEX_VIRT_WIDTH, VBE_DISPI_INDEX_VIRT_HEIGHT,
	VBE_DISPI_INDEX_X_OFFSET, VBE_DISPI_INDEX_Y_OFFSET
};

enum VBE_FLAGS 
{
	VBE_DISPI_DISABLED, VBE_DISPI_ENABLED, VBE_DISPI_GETCAPS,
	VBE_DISPI_8BIT_DAC = 0x20, VBE_DISPI_LFB_ENABLED = 0x40, VBE_DISPI_NOCLEARMEM = 0x80
};

enum VBE_IDS
{
	VBE_DISPI_ID0 = 0xB0C0, VBE_DISPI_ID1, VBE_DISPI_ID2, 
	VBE_DISPI_ID3, VBE_DISPI_ID4, VBE_DISPI_ID5
};


typedef struct 
{
    unsigned char mode;
	unsigned char cols;
    unsigned long segment;
    unsigned char misc;
    unsigned char seq[VGA_REGS_SEQ_COUNT];
    unsigned char crtc[VGA_REGS_CRTC_COUNT];
    unsigned char gc[VGA_REGS_GC_COUNT];
    unsigned char ac[VGA_REGS_AC_COUNT];
} vga_mode_registers_t;

const vga_mode_registers_t vga_mode_regs_13h = 
{
    .mode =     0x13,
	
    .cols =     40,
	
    .segment =  0xA000,
	
    .misc =     0x63,
	
    .seq =     {0x03, 0x01, 0x0F, 0x00, 0x0E},
	
    .crtc =    {0x5F, 0x4F, 0x50, 0x82, 0x54, 0x80, 0xBF, 0x1F,
				0x00, 0x41, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x9C, 0x0E, 0x8F, 0x28, 0x40, 0x96, 0xB9, 0xA3,
				0xFF},
				
    .gc =      {0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x05, 0x0F,
				0xFF},
				
    .ac =      {0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
				0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,
				0x41, 0x00, 0x0F, 0x00, 0x00}
				
};

const vga_mode_registers_t vga_mode_regs_12h = 
{
    .mode =    0x12,
	
    .cols =    80,
	
    .segment = 0xA000,
	
    .misc =    0xE3,
	
    .seq =    {0x01, 0x01, 0x04, 0x00, 0x06},
	
    .crtc =   {0x5F, 0x4F, 0x50, 0x82, 0x54, 0x80, 0x0B, 0x3E,
			   0x00, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
			   0xEA, 0x8C, 0xDF, 0x28, 0x00, 0xE7, 0x04, 0xE3,
			   0xFF},
			   
    .gc =     {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x0F,
		       0xFF},
			   
    .ac =     {0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
		       0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,
		       0x01, 0x00, 0x0F, 0x00, 0x00}
			   
};

const vga_mode_registers_t vga_mode_regs_03h = 
{
    .mode =    0x03,
	
    .cols =    80,
	
    .segment = 0xB800,
	
    .misc =    0x67,
	
    .seq =    {0x03, 0x00, 0x03, 0x00, 0x02},
	
    .crtc =   {0x5F, 0x4F, 0x50, 0x82, 0x55, 0x81, 0xBF, 0x1F,
			   0x00, 0x4F, 0x0E, 0x0F, 0x00, 0x00, 0x00, 0x00,
			   0x9C, 0x0E, 0x8F, 0x28, 0x1F, 0x96, 0xB9, 0xA3,
			   0xFF},
			   
    .gc =     {0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x0E, 0x00,
			   0xFF},
			   
    .ac =     {0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
			   0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,
			   0x0C, 0x00, 0x0F, 0x08, 0x00}
			   
};


static unsigned char vgafont16[VGA_FONT_SIZE] =
{
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x7e, 0x81, 0xa5, 0x81, 0x81, 0xbd, 0x99, 0x81, 0x81, 0x7e, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x7e, 0xff, 0xdb, 0xff, 0xff, 0xc3, 0xe7, 0xff, 0xff, 0x7e, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x6c, 0xfe, 0xfe, 0xfe, 0xfe, 0x7c, 0x38, 0x10, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x10, 0x38, 0x7c, 0xfe, 0x7c, 0x38, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x18, 0x3c, 0x3c, 0xe7, 0xe7, 0xe7, 0x18, 0x18, 0x3c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x18, 0x3c, 0x7e, 0xff, 0xff, 0x7e, 0x18, 0x18, 0x3c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x3c, 0x3c, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xe7, 0xc3, 0xc3, 0xe7, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x3c, 0x66, 0x42, 0x42, 0x66, 0x3c, 0x00, 0x00, 0x00, 0x00, 0x00,
	0xff, 0xff, 0xff, 0xff, 0xff, 0xc3, 0x99, 0xbd, 0xbd, 0x99, 0xc3, 0xff, 0xff, 0xff, 0xff, 0xff,
	0x00, 0x00, 0x1e, 0x0e, 0x1a, 0x32, 0x78, 0xcc, 0xcc, 0xcc, 0xcc, 0x78, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x3c, 0x66, 0x66, 0x66, 0x66, 0x3c, 0x18, 0x7e, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x3f, 0x33, 0x3f, 0x30, 0x30, 0x30, 0x30, 0x70, 0xf0, 0xe0, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x7f, 0x63, 0x7f, 0x63, 0x63, 0x63, 0x63, 0x67, 0xe7, 0xe6, 0xc0, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x18, 0x18, 0xdb, 0x3c, 0xe7, 0x3c, 0xdb, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x80, 0xc0, 0xe0, 0xf0, 0xf8, 0xfe, 0xf8, 0xf0, 0xe0, 0xc0, 0x80, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x02, 0x06, 0x0e, 0x1e, 0x3e, 0xfe, 0x3e, 0x1e, 0x0e, 0x06, 0x02, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x18, 0x3c, 0x7e, 0x18, 0x18, 0x18, 0x7e, 0x3c, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x00, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x7f, 0xdb, 0xdb, 0xdb, 0x7b, 0x1b, 0x1b, 0x1b, 0x1b, 0x1b, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x7c, 0xc6, 0x60, 0x38, 0x6c, 0xc6, 0xc6, 0x6c, 0x38, 0x0c, 0xc6, 0x7c, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0xfe, 0xfe, 0xfe, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x18, 0x3c, 0x7e, 0x18, 0x18, 0x18, 0x7e, 0x3c, 0x18, 0x7e, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x18, 0x3c, 0x7e, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x7e, 0x3c, 0x18, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x0c, 0xfe, 0x0c, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x60, 0xfe, 0x60, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xc0, 0xc0, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x24, 0x66, 0xff, 0x66, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x10, 0x38, 0x38, 0x7c, 0x7c, 0xfe, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0xfe, 0xfe, 0x7c, 0x7c, 0x38, 0x38, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x18, 0x3c, 0x3c, 0x3c, 0x18, 0x18, 0x18, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x66, 0x66, 0x66, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x6c, 0x6c, 0xfe, 0x6c, 0x6c, 0x6c, 0xfe, 0x6c, 0x6c, 0x00, 0x00, 0x00, 0x00,
	0x18, 0x18, 0x7c, 0xc6, 0xc2, 0xc0, 0x7c, 0x06, 0x06, 0x86, 0xc6, 0x7c, 0x18, 0x18, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0xc2, 0xc6, 0x0c, 0x18, 0x30, 0x60, 0xc6, 0x86, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x38, 0x6c, 0x6c, 0x38, 0x76, 0xdc, 0xcc, 0xcc, 0xcc, 0x76, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x30, 0x30, 0x30, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x0c, 0x18, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x18, 0x0c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x30, 0x18, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x18, 0x30, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x66, 0x3c, 0xff, 0x3c, 0x66, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x7e, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x18, 0x30, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x02, 0x06, 0x0c, 0x18, 0x30, 0x60, 0xc0, 0x80, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x3c, 0x66, 0xc3, 0xc3, 0xdb, 0xdb, 0xc3, 0xc3, 0x66, 0x3c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x18, 0x38, 0x78, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x7e, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x7c, 0xc6, 0x06, 0x0c, 0x18, 0x30, 0x60, 0xc0, 0xc6, 0xfe, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x7c, 0xc6, 0x06, 0x06, 0x3c, 0x06, 0x06, 0x06, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x0c, 0x1c, 0x3c, 0x6c, 0xcc, 0xfe, 0x0c, 0x0c, 0x0c, 0x1e, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xfe, 0xc0, 0xc0, 0xc0, 0xfc, 0x06, 0x06, 0x06, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x38, 0x60, 0xc0, 0xc0, 0xfc, 0xc6, 0xc6, 0xc6, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xfe, 0xc6, 0x06, 0x06, 0x0c, 0x18, 0x30, 0x30, 0x30, 0x30, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x7c, 0xc6, 0xc6, 0xc6, 0x7c, 0xc6, 0xc6, 0xc6, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x7c, 0xc6, 0xc6, 0xc6, 0x7e, 0x06, 0x06, 0x06, 0x0c, 0x78, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x18, 0x18, 0x30, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x06, 0x0c, 0x18, 0x30, 0x60, 0x30, 0x18, 0x0c, 0x06, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x7e, 0x00, 0x00, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x60, 0x30, 0x18, 0x0c, 0x06, 0x0c, 0x18, 0x30, 0x60, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x7c, 0xc6, 0xc6, 0x0c, 0x18, 0x18, 0x18, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x7c, 0xc6, 0xc6, 0xde, 0xde, 0xde, 0xdc, 0xc0, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x10, 0x38, 0x6c, 0xc6, 0xc6, 0xfe, 0xc6, 0xc6, 0xc6, 0xc6, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xfc, 0x66, 0x66, 0x66, 0x7c, 0x66, 0x66, 0x66, 0x66, 0xfc, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x3c, 0x66, 0xc2, 0xc0, 0xc0, 0xc0, 0xc0, 0xc2, 0x66, 0x3c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xf8, 0x6c, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x6c, 0xf8, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xfe, 0x66, 0x62, 0x68, 0x78, 0x68, 0x60, 0x62, 0x66, 0xfe, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xfe, 0x66, 0x62, 0x68, 0x78, 0x68, 0x60, 0x60, 0x60, 0xf0, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x3c, 0x66, 0xc2, 0xc0, 0xc0, 0xde, 0xc6, 0xc6, 0x66, 0x3a, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xc6, 0xc6, 0xc6, 0xc6, 0xfe, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x3c, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x1e, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0xcc, 0xcc, 0xcc, 0x78, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xe6, 0x66, 0x66, 0x6c, 0x78, 0x78, 0x6c, 0x66, 0x66, 0xe6, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xf0, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x62, 0x66, 0xfe, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xc3, 0xe7, 0xff, 0xff, 0xdb, 0xc3, 0xc3, 0xc3, 0xc3, 0xc3, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xc6, 0xe6, 0xf6, 0xfe, 0xde, 0xce, 0xc6, 0xc6, 0xc6, 0xc6, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x7c, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xfc, 0x66, 0x66, 0x66, 0x7c, 0x60, 0x60, 0x60, 0x60, 0xf0, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x7c, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xd6, 0xde, 0x7c, 0x0c, 0x0e, 0x00, 0x00,
	0x00, 0x00, 0xfc, 0x66, 0x66, 0x66, 0x7c, 0x6c, 0x66, 0x66, 0x66, 0xe6, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x7c, 0xc6, 0xc6, 0x60, 0x38, 0x0c, 0x06, 0xc6, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xff, 0xdb, 0x99, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xc3, 0xc3, 0xc3, 0xc3, 0xc3, 0xc3, 0xc3, 0x66, 0x3c, 0x18, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xc3, 0xc3, 0xc3, 0xc3, 0xc3, 0xdb, 0xdb, 0xff, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xc3, 0xc3, 0x66, 0x3c, 0x18, 0x18, 0x3c, 0x66, 0xc3, 0xc3, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xc3, 0xc3, 0xc3, 0x66, 0x3c, 0x18, 0x18, 0x18, 0x18, 0x3c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xff, 0xc3, 0x86, 0x0c, 0x18, 0x30, 0x60, 0xc1, 0xc3, 0xff, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x3c, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x3c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x80, 0xc0, 0xe0, 0x70, 0x38, 0x1c, 0x0e, 0x06, 0x02, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x3c, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x3c, 0x00, 0x00, 0x00, 0x00,
	0x10, 0x38, 0x6c, 0xc6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00,
	0x30, 0x30, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x78, 0x0c, 0x7c, 0xcc, 0xcc, 0xcc, 0x76, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xe0, 0x60, 0x60, 0x78, 0x6c, 0x66, 0x66, 0x66, 0x66, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x7c, 0xc6, 0xc0, 0xc0, 0xc0, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x1c, 0x0c, 0x0c, 0x3c, 0x6c, 0xcc, 0xcc, 0xcc, 0xcc, 0x76, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x7c, 0xc6, 0xfe, 0xc0, 0xc0, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x38, 0x6c, 0x64, 0x60, 0xf0, 0x60, 0x60, 0x60, 0x60, 0xf0, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0x7c, 0x0c, 0xcc, 0x78, 0x00,
	0x00, 0x00, 0xe0, 0x60, 0x60, 0x6c, 0x76, 0x66, 0x66, 0x66, 0x66, 0xe6, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x18, 0x18, 0x00, 0x38, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x06, 0x06, 0x00, 0x0e, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x66, 0x66, 0x3c, 0x00,
	0x00, 0x00, 0xe0, 0x60, 0x60, 0x66, 0x6c, 0x78, 0x78, 0x6c, 0x66, 0xe6, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x38, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xe6, 0xff, 0xdb, 0xdb, 0xdb, 0xdb, 0xdb, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xdc, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x7c, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xdc, 0x66, 0x66, 0x66, 0x66, 0x66, 0x7c, 0x60, 0x60, 0xf0, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0x7c, 0x0c, 0x0c, 0x1e, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xdc, 0x76, 0x66, 0x60, 0x60, 0x60, 0xf0, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x7c, 0xc6, 0x60, 0x38, 0x0c, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x10, 0x30, 0x30, 0xfc, 0x30, 0x30, 0x30, 0x30, 0x36, 0x1c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0x76, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xc3, 0xc3, 0xc3, 0xc3, 0x66, 0x3c, 0x18, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xc3, 0xc3, 0xc3, 0xdb, 0xdb, 0xff, 0x66, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xc3, 0x66, 0x3c, 0x18, 0x3c, 0x66, 0xc3, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0x7e, 0x06, 0x0c, 0xf8, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0xcc, 0x18, 0x30, 0x60, 0xc6, 0xfe, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x0e, 0x18, 0x18, 0x18, 0x70, 0x18, 0x18, 0x18, 0x18, 0x0e, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x18, 0x18, 0x18, 0x18, 0x00, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x70, 0x18, 0x18, 0x18, 0x0e, 0x18, 0x18, 0x18, 0x18, 0x70, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x76, 0xdc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x10, 0x38, 0x6c, 0xc6, 0xc6, 0xc6, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x3c, 0x66, 0xc2, 0xc0, 0xc0, 0xc0, 0xc2, 0x66, 0x3c, 0x0c, 0x06, 0x7c, 0x00, 0x00,
	0x00, 0x00, 0xcc, 0x00, 0x00, 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0x76, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x0c, 0x18, 0x30, 0x00, 0x7c, 0xc6, 0xfe, 0xc0, 0xc0, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x10, 0x38, 0x6c, 0x00, 0x78, 0x0c, 0x7c, 0xcc, 0xcc, 0xcc, 0x76, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xcc, 0x00, 0x00, 0x78, 0x0c, 0x7c, 0xcc, 0xcc, 0xcc, 0x76, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x60, 0x30, 0x18, 0x00, 0x78, 0x0c, 0x7c, 0xcc, 0xcc, 0xcc, 0x76, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x38, 0x6c, 0x38, 0x00, 0x78, 0x0c, 0x7c, 0xcc, 0xcc, 0xcc, 0x76, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x3c, 0x66, 0x60, 0x60, 0x66, 0x3c, 0x0c, 0x06, 0x3c, 0x00, 0x00, 0x00,
	0x00, 0x10, 0x38, 0x6c, 0x00, 0x7c, 0xc6, 0xfe, 0xc0, 0xc0, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xc6, 0x00, 0x00, 0x7c, 0xc6, 0xfe, 0xc0, 0xc0, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x60, 0x30, 0x18, 0x00, 0x7c, 0xc6, 0xfe, 0xc0, 0xc0, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x66, 0x00, 0x00, 0x38, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x18, 0x3c, 0x66, 0x00, 0x38, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x60, 0x30, 0x18, 0x00, 0x38, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0xc6, 0x00, 0x10, 0x38, 0x6c, 0xc6, 0xc6, 0xfe, 0xc6, 0xc6, 0xc6, 0x00, 0x00, 0x00, 0x00,
	0x38, 0x6c, 0x38, 0x00, 0x38, 0x6c, 0xc6, 0xc6, 0xfe, 0xc6, 0xc6, 0xc6, 0x00, 0x00, 0x00, 0x00,
	0x18, 0x30, 0x60, 0x00, 0xfe, 0x66, 0x60, 0x7c, 0x60, 0x60, 0x66, 0xfe, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x6e, 0x3b, 0x1b, 0x7e, 0xd8, 0xdc, 0x77, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x3e, 0x6c, 0xcc, 0xcc, 0xfe, 0xcc, 0xcc, 0xcc, 0xcc, 0xce, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x10, 0x38, 0x6c, 0x00, 0x7c, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xc6, 0x00, 0x00, 0x7c, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x60, 0x30, 0x18, 0x00, 0x7c, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x30, 0x78, 0xcc, 0x00, 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0x76, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x60, 0x30, 0x18, 0x00, 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0x76, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xc6, 0x00, 0x00, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0x7e, 0x06, 0x0c, 0x78, 0x00,
	0x00, 0xc6, 0x00, 0x7c, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0xc6, 0x00, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x18, 0x18, 0x7e, 0xc3, 0xc0, 0xc0, 0xc0, 0xc3, 0x7e, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x38, 0x6c, 0x64, 0x60, 0xf0, 0x60, 0x60, 0x60, 0x60, 0xe6, 0xfc, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xc3, 0x66, 0x3c, 0x18, 0xff, 0x18, 0xff, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00,
	0x00, 0xfc, 0x66, 0x66, 0x7c, 0x62, 0x66, 0x6f, 0x66, 0x66, 0x66, 0xf3, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x0e, 0x1b, 0x18, 0x18, 0x18, 0x7e, 0x18, 0x18, 0x18, 0x18, 0x18, 0xd8, 0x70, 0x00, 0x00,
	0x00, 0x18, 0x30, 0x60, 0x00, 0x78, 0x0c, 0x7c, 0xcc, 0xcc, 0xcc, 0x76, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x0c, 0x18, 0x30, 0x00, 0x38, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x18, 0x30, 0x60, 0x00, 0x7c, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x18, 0x30, 0x60, 0x00, 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0x76, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x76, 0xdc, 0x00, 0xdc, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00,
	0x76, 0xdc, 0x00, 0xc6, 0xe6, 0xf6, 0xfe, 0xde, 0xce, 0xc6, 0xc6, 0xc6, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x3c, 0x6c, 0x6c, 0x3e, 0x00, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x38, 0x6c, 0x6c, 0x38, 0x00, 0x7c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x30, 0x30, 0x00, 0x30, 0x30, 0x60, 0xc0, 0xc6, 0xc6, 0x7c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0xc0, 0xc0, 0xc0, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0x06, 0x06, 0x06, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0xc0, 0xc0, 0xc2, 0xc6, 0xcc, 0x18, 0x30, 0x60, 0xce, 0x9b, 0x06, 0x0c, 0x1f, 0x00, 0x00,
	0x00, 0xc0, 0xc0, 0xc2, 0xc6, 0xcc, 0x18, 0x30, 0x66, 0xce, 0x96, 0x3e, 0x06, 0x06, 0x00, 0x00,
	0x00, 0x00, 0x18, 0x18, 0x00, 0x18, 0x18, 0x18, 0x3c, 0x3c, 0x3c, 0x18, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x36, 0x6c, 0xd8, 0x6c, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xd8, 0x6c, 0x36, 0x6c, 0xd8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x11, 0x44, 0x11, 0x44, 0x11, 0x44, 0x11, 0x44, 0x11, 0x44, 0x11, 0x44, 0x11, 0x44, 0x11, 0x44,
	0x55, 0xaa, 0x55, 0xaa, 0x55, 0xaa, 0x55, 0xaa, 0x55, 0xaa, 0x55, 0xaa, 0x55, 0xaa, 0x55, 0xaa,
	0xdd, 0x77, 0xdd, 0x77, 0xdd, 0x77, 0xdd, 0x77, 0xdd, 0x77, 0xdd, 0x77, 0xdd, 0x77, 0xdd, 0x77,
	0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
	0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0xf8, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
	0x18, 0x18, 0x18, 0x18, 0x18, 0xf8, 0x18, 0xf8, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
	0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0xf6, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xf8, 0x18, 0xf8, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
	0x36, 0x36, 0x36, 0x36, 0x36, 0xf6, 0x06, 0xf6, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36,
	0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0x06, 0xf6, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36,
	0x36, 0x36, 0x36, 0x36, 0x36, 0xf6, 0x06, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x18, 0x18, 0x18, 0x18, 0x18, 0xf8, 0x18, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf8, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
	0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
	0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x1f, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0xff, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
	0x18, 0x18, 0x18, 0x18, 0x18, 0x1f, 0x18, 0x1f, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
	0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x37, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36,
	0x36, 0x36, 0x36, 0x36, 0x36, 0x37, 0x30, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0x30, 0x37, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36,
	0x36, 0x36, 0x36, 0x36, 0x36, 0xf7, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0xf7, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36,
	0x36, 0x36, 0x36, 0x36, 0x36, 0x37, 0x30, 0x37, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x36, 0x36, 0x36, 0x36, 0x36, 0xf7, 0x00, 0xf7, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36,
	0x18, 0x18, 0x18, 0x18, 0x18, 0xff, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0xff, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36,
	0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x18, 0x18, 0x18, 0x18, 0x18, 0x1f, 0x18, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0x18, 0x1f, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36,
	0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0xff, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36, 0x36,
	0x18, 0x18, 0x18, 0x18, 0x18, 0xff, 0x18, 0xff, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
	0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
	0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
	0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0,
	0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f,
	0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0xdc, 0xd8, 0xd8, 0xd8, 0xdc, 0x76, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x78, 0xcc, 0xcc, 0xcc, 0xd8, 0xcc, 0xc6, 0xc6, 0xc6, 0xcc, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0xfe, 0xc6, 0xc6, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0xfe, 0x6c, 0x6c, 0x6c, 0x6c, 0x6c, 0x6c, 0x6c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0xfe, 0xc6, 0x60, 0x30, 0x18, 0x30, 0x60, 0xc6, 0xfe, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x7e, 0xd8, 0xd8, 0xd8, 0xd8, 0xd8, 0x70, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x66, 0x66, 0x66, 0x66, 0x66, 0x7c, 0x60, 0x60, 0xc0, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x76, 0xdc, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x7e, 0x18, 0x3c, 0x66, 0x66, 0x66, 0x3c, 0x18, 0x7e, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x38, 0x6c, 0xc6, 0xc6, 0xfe, 0xc6, 0xc6, 0x6c, 0x38, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x38, 0x6c, 0xc6, 0xc6, 0xc6, 0x6c, 0x6c, 0x6c, 0x6c, 0xee, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x1e, 0x30, 0x18, 0x0c, 0x3e, 0x66, 0x66, 0x66, 0x66, 0x3c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x7e, 0xdb, 0xdb, 0xdb, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x03, 0x06, 0x7e, 0xdb, 0xdb, 0xf3, 0x7e, 0x60, 0xc0, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x1c, 0x30, 0x60, 0x60, 0x7c, 0x60, 0x60, 0x60, 0x30, 0x1c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x7c, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0xfe, 0x00, 0x00, 0xfe, 0x00, 0x00, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x7e, 0x18, 0x18, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x30, 0x18, 0x0c, 0x06, 0x0c, 0x18, 0x30, 0x00, 0x7e, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x0c, 0x18, 0x30, 0x60, 0x30, 0x18, 0x0c, 0x00, 0x7e, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x0e, 0x1b, 0x1b, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18,
	0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0xd8, 0xd8, 0xd8, 0x70, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x7e, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0xdc, 0x00, 0x76, 0xdc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x38, 0x6c, 0x6c, 0x38, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x0f, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0xec, 0x6c, 0x6c, 0x3c, 0x1c, 0x00, 0x00, 0x00, 0x00,
	0x00, 0xd8, 0x6c, 0x6c, 0x6c, 0x6c, 0x6c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x70, 0xd8, 0x30, 0x60, 0xc8, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x7c, 0x7c, 0x7c, 0x7c, 0x7c, 0x7c, 0x7c, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

unsigned char vgaPalette_192[256][3] = {
	{0, 0, 0}, {0, 0, 170}, {0, 170, 0}, {0, 170, 170}, {170, 0, 0}, {170, 0, 170}, {170, 85, 0}, {170, 170, 170},
	{85, 85, 85}, {85, 85, 255}, {85, 255, 85}, {85, 255, 255}, {255, 85, 85}, {255, 85, 255}, {255, 255, 85}, {255, 255, 255},
	{0, 0, 0}, {20, 20, 20}, {32, 32, 32}, {44, 44, 44}, {56, 56, 56}, {68, 68, 68}, {80, 80, 80}, {96, 96, 96},
	{112, 112, 112}, {128, 128, 128}, {144, 144, 144}, {160, 160, 160}, {180, 180, 180}, {200, 200, 200}, {224, 224, 224}, {255, 255, 255},
	{0, 0, 255}, {64, 0, 255}, {128, 0, 255}, {192, 0, 255}, {255, 0, 255}, {255, 0, 192}, {255, 0, 128}, {255, 0, 64},
	{255, 0, 0}, {255, 64, 0}, {255, 128, 0}, {255, 192, 0}, {255, 255, 0}, {192, 255, 0}, {128, 255, 0}, {64, 255, 0},
	{0, 255, 0}, {0, 255, 64}, {0, 255, 128}, {0, 255, 192}, {0, 255, 255}, {0, 192, 255}, {0, 128, 255}, {0, 64, 255},
	{128, 128, 255}, {160, 128, 255}, {192, 128, 255}, {224, 128, 255}, {255, 128, 255}, {255, 128, 224}, {255, 128, 192}, {255, 128, 160},
	{255, 128, 128}, {255, 160, 128}, {255, 192, 128}, {255, 224, 128}, {255, 255, 128}, {224, 255, 128}, {192, 255, 128}, {160, 255, 128},
	{128, 255, 128}, {128, 255, 160}, {128, 255, 192}, {128, 255, 224}, {128, 255, 255}, {128, 224, 255}, {128, 192, 255}, {128, 160, 255},
	{0, 0, 128}, {32, 0, 128}, {64, 0, 128}, {96, 0, 128}, {128, 0, 128}, {128, 0, 96}, {128, 0, 64}, {128, 0, 32},
	{128, 0, 0}, {128, 32, 0}, {128, 64, 0}, {128, 96, 0}, {128, 128, 0}, {96, 128, 0}, {64, 128, 0}, {32, 128, 0},
	{0, 128, 0}, {0, 128, 32}, {0, 128, 64}, {0, 128, 96}, {0, 128, 128}, {0, 96, 128}, {0, 64, 128}, {0, 32, 128},
	{64, 64, 128}, {80, 64, 128}, {96, 64, 128}, {112, 64, 128}, {128, 64, 128}, {128, 64, 112}, {128, 64, 96}, {128, 64, 80},
	{128, 64, 64}, {128, 80, 64}, {128, 96, 64}, {128, 112, 64}, {128, 128, 64}, {112, 128, 64}, {96, 128, 64}, {80, 128, 64},
	{64, 128, 64}, {64, 128, 80}, {64, 128, 96}, {64, 128, 112}, {64, 128, 128}, {64, 112, 128}, {64, 96, 128}, {64, 80, 128},
	{0, 0, 64}, {16, 0, 64}, {32, 0, 64}, {48, 0, 64}, {64, 0, 64}, {64, 0, 48}, {64, 0, 32}, {64, 0, 16},
	{64, 0, 0}, {64, 16, 0}, {64, 32, 0}, {64, 48, 0}, {64, 64, 0}, {48, 64, 0}, {32, 64, 0}, {16, 64, 0},
	{0, 64, 0}, {0, 64, 16}, {0, 64, 32}, {0, 64, 48}, {0, 64, 64}, {0, 48, 64}, {0, 32, 64}, {0, 16, 64},
	{32, 32, 64}, {40, 32, 64}, {48, 32, 64}, {56, 32, 64}, {64, 32, 64}, {64, 32, 56}, {64, 32, 48}, {64, 32, 40},
	{64, 32, 32}, {64, 40, 32}, {64, 48, 32}, {64, 56, 32}, {64, 64, 32}, {56, 64, 32}, {48, 64, 32}, {40, 64, 32},
	{32, 64, 32}, {32, 64, 40}, {32, 64, 48}, {32, 64, 56}, {32, 64, 64}, {32, 56, 64}, {32, 48, 64}, {32, 40, 64},
	{0, 0, 32}, {8, 0, 32}, {16, 0, 32}, {24, 0, 32}, {32, 0, 32}, {32, 0, 24}, {32, 0, 16}, {32, 0, 8},
	{32, 0, 0}, {32, 8, 0}, {32, 16, 0}, {32, 24, 0}, {32, 32, 0}, {24, 32, 0}, {16, 32, 0}, {8, 32, 0},
	{0, 32, 0}, {0, 32, 8}, {0, 32, 16}, {0, 32, 24}, {0, 32, 32}, {0, 24, 32}, {0, 16, 32}, {0, 8, 32},
	{16, 16, 32}, {20, 16, 32}, {24, 16, 32}, {28, 16, 32}, {32, 16, 32}, {32, 16, 28}, {32, 16, 24}, {32, 16, 20},
	{32, 16, 16}, {32, 20, 16}, {32, 24, 16}, {32, 28, 16}, {32, 32, 16}, {28, 32, 16}, {24, 32, 16}, {20, 32, 16},
	{16, 32, 16}, {16, 32, 20}, {16, 32, 24}, {16, 32, 28}, {16, 32, 32}, {16, 28, 32}, {16, 24, 32}, {16, 20, 32}
	// ... continue with the remaining 192 colors
};

unsigned char vgaPalette[256][3] = {
	{0x00, 0x00, 0x00}, {0x00, 0x00, 0xAA}, {0x00, 0xAA, 0x00}, {0x00, 0xAA, 0xAA},
	{0xAA, 0x00, 0x00}, {0xAA, 0x00, 0xAA}, {0xAA, 0x55, 0x00}, {0xAA, 0xAA, 0xAA},
	{0x55, 0x55, 0x55}, {0x55, 0x55, 0xFF}, {0x55, 0xFF, 0x55}, {0x55, 0xFF, 0xFF},
	{0xFF, 0x55, 0x55}, {0xFF, 0x55, 0xFF}, {0xFF, 0xFF, 0x55}, {0xFF, 0xFF, 0xFF},
	// Continue defining the remaining 240 colors...
};


uint8_t inb(uint16_t port)
{
    uint8_t value;
    asm volatile ("inb %1, %0" : "=a"(value) : "Nd"(port));
    return value;
}
void outb(uint16_t port, uint8_t value)
{
    asm volatile ("outb %0, %1" : : "a"(value), "Nd"(port));
}

unsigned short inw(unsigned short port)
{
    unsigned short r;
    __asm__ volatile   ( "inw %1, %0"
                   : "=a"(r)
                   : "Nd"(port)
                   : "memory");
    return r;
}

void outw(unsigned short port, unsigned short value)
{
    __asm__ volatile   ( "outw %0, %1"
				   : 
				   : "a"(value), 
				     "Nd"(port) 
				   : "memory");
}

void clearpalette(void)
{
	outb(0x3C8, 0);
	for(int i=0;i<256;i++)
	{
		outb(0x3C9, 0);
		outb(0x3C9, 0);
		outb(0x3C9, 0);
	}
}

void clearpalette16(void)
{
	outb(0x3C8, 0);
	for(int i=0;i<16;i++)
	{
		outb(0x3C9, 0);
		outb(0x3C9, 0);
		outb(0x3C9, 0);
	}
}

void setpalette(unsigned char palette[256][3])
{
	outb(0x3C8, 0);
	for(int i=0;i<256;i++)
	{
		unsigned char r = palette[i][0] >> 2;
		unsigned char g = palette[i][1] >> 2;
		unsigned char b = palette[i][2] >> 2;
		outb(0x3C9, r);
		outb(0x3C9, g);
		outb(0x3C9, b);
	}
}

void setpalette16(unsigned char palette[16][3])
{
	outb(0x3C8, 0);
	for(int i=0;i<16;i++)
	{
		unsigned char r = palette[i][0] >> 2;
		unsigned char g = palette[i][1] >> 2;
		unsigned char b = palette[i][2] >> 2;
		outb(0x3C9, r);
		outb(0x3C9, g);
		outb(0x3C9, b);
	}
}

unsigned char *vga = (unsigned char *)VGA_TEXT_ADDRESS;

int getcursor(void)
{
	unsigned short offset;
    outb(0x3d4, 14);
    offset = (inb(0x3d5) << 8);
    outb(0x3d4, 15);
    offset += inb(0x3d5);
	return offset;
}

void setcursoroffset(unsigned short offset)
{
    outb(0x3d4, 14);
    outb(0x3d5, (offset >> 8));
    outb(0x3d4, 15);
    outb(0x3d5, offset);
}

int strlen(const char *s)
{
	int i=0;
	while (*s)
	{
		i++;
		*s++;
	}
	return i;
}

void print(const char *s)
{
	int len = strlen(s);
	asm( "int $0x80" :: "a" (4), "b" (1), "c" (s), "d" (len) );
}

void clrscr(void)
{
	unsigned long vga_memory_count = VGA_TEXT_ADDRESS;
	unsigned char *vga_memory = (unsigned char *)VGA_TEXT_ADDRESS;
	while (vga_memory_count < (VGA_TEXT_ADDRESS+0xFA0))
	{
		*vga_memory++ = ' ';
		*vga_memory++ = 7;
		vga_memory_count += 2;
	}
	setcursoroffset(0);
	vga = (unsigned char *)VGA_TEXT_ADDRESS;
}

void resetcursor(void) 
{
    // Set cursor position to top left corner
    outb(VGA_CRTC_INDEX, VGA_CURSOR_HIGH);
    outb(VGA_CRTC_DATA, 0);
    outb(VGA_CRTC_INDEX, VGA_CURSOR_LOW);
    outb(VGA_CRTC_DATA, 0);
}

unsigned char getch(void)
{
	unsigned char c=0;
	int q = 0, s = 0;
    while(q == 0)
	{
		if (s & 0x01)
		{
			s = 0;
			if (c & 0x7F)
			{
				if (c != 0)
				{
					if (c < 250)
					{
						q = 1;
					}
				}
			}
			c = (inb(0x60));
		}
		s = inb(0x64);
	}
	outb(0x20, 0x20);
	return c;
}


void vbe_write_reg(unsigned short idx, unsigned short val)
{
   outw(VBE_DISPI_IOPORT_INDEX, idx);
   outw(VBE_DISPI_IOPORT_DATA, val);
}
 
unsigned short vbe_read_reg(unsigned short idx)
{
    outw(VBE_DISPI_IOPORT_INDEX, idx);
    return inw(VBE_DISPI_IOPORT_DATA);
}
 
void vbe_exit_mode()
{
   vbe_write_reg(VBE_DISPI_INDEX_ENABLE, VBE_DISPI_DISABLED);
}

int is_vbe_available(void)
{
    return (vbe_read_reg(VBE_DISPI_INDEX_ID) == VBE_DISPI_ID4);
}
 
void set_vbe_mode(unsigned int width, unsigned int height, unsigned int depth, int lfb, int clr)
{
	unsigned short enable_mode = VBE_DISPI_ENABLED | 
								 (lfb ? VBE_DISPI_LFB_ENABLED : 0) |
								 (clr ? 0 : VBE_DISPI_NOCLEARMEM);
    vbe_write_reg(VBE_DISPI_INDEX_ENABLE, VBE_DISPI_DISABLED);
    vbe_write_reg(VBE_DISPI_INDEX_XRES, width);
    vbe_write_reg(VBE_DISPI_INDEX_YRES, height);
    vbe_write_reg(VBE_DISPI_INDEX_BPP, depth);
    vbe_write_reg(VBE_DISPI_INDEX_ENABLE, enable_mode);
}

void set_vbe_bank(unsigned short BankNumber)
{
    vbe_write_reg(VBE_DISPI_INDEX_BANK, BankNumber);
}

void vga_write_reg(unsigned short port, unsigned char reg, unsigned char val)
{
   outb(port,   reg);
   outb(port+1, val);
}

unsigned char vga_read_reg(unsigned short port, unsigned char reg)
{
   outb(port,    reg);
   return inb(port+1);
}

void setvgafont(const unsigned char *font)
{
   int i, j;
   unsigned char *p = (unsigned char *)VGA_TEXT_ADDRESS;
   unsigned char mem_mode, graph_mode;
   vga_write_reg(VGA_SEQ_INDEX, VGA_SEQ_MAP_MASK_REG, 0x04);
   vga_write_reg(VGA_SEQ_INDEX, VGA_SEQ_CHARSET_REG, 0x00);
   mem_mode = vga_read_reg(VGA_SEQ_INDEX, VGA_SEQ_MEMORY_MODE_REG);
   vga_write_reg(VGA_SEQ_INDEX, VGA_SEQ_MEMORY_MODE_REG, 0x06);
   vga_write_reg(VGA_GC_INDEX, VGA_GC_READ_MAP_SELECT_REG, 0x02);   
   graph_mode = vga_read_reg(VGA_GC_INDEX, VGA_GC_GRAPHICS_MODE_REG);
   vga_write_reg(VGA_GC_INDEX, VGA_GC_GRAPHICS_MODE_REG, 0x00);
   vga_write_reg(VGA_GC_INDEX, VGA_GC_MISC_REG, 0x0C);
   for(i = 0; i < VGA_FONT_CHARSET_LENGTH; i++)
   {
      for(j = 0; j < VGA_FONT_BYTES_PER_GLYPTH; j++)
	  {
         *p = *font;
         ++p;
         ++font;
      }
      p += VGA_FONT_BYTES_SKIP;
   }
   vga_write_reg(VGA_SEQ_INDEX, VGA_SEQ_MAP_MASK_REG, 0x03);
   vga_write_reg(VGA_SEQ_INDEX, VGA_SEQ_MEMORY_MODE_REG, mem_mode);   
   vga_write_reg(VGA_GC_INDEX, VGA_GC_READ_MAP_SELECT_REG, 0x00);
   vga_write_reg(VGA_GC_INDEX, VGA_GC_GRAPHICS_MODE_REG, graph_mode);
   vga_write_reg(VGA_GC_INDEX, VGA_GC_MISC_REG, 0x0C);
}


void wait_for_vertical_retrace(void) 
{
    while (inb(0x3DA) & 8);
    while (!(inb(0x3DA) & 8));
}

void set_video_mode_regs(vga_mode_registers_t mode_regs)
{
	int i;
    outb(VGA_MISC_WRITE, mode_regs.misc);
    for(i=0;i<VGA_REGS_SEQ_COUNT;i++)
    {
        outb(VGA_SEQ_INDEX, i);
        outb(VGA_SEQ_DATA, mode_regs.seq[i]);
    }
    outb(VGA_CRTC_INDEX, 0x11);
    outb(VGA_CRTC_DATA, 0);
    for(i=0;i<VGA_REGS_CRTC_COUNT;i++)
    {
        outb(VGA_CRTC_INDEX, i);
        outb(VGA_CRTC_DATA, mode_regs.crtc[i]);
    }
    for(i=0;i<VGA_REGS_GC_COUNT;i++)
    {
        outb(VGA_GC_INDEX, i);
        outb(VGA_GC_DATA, mode_regs.gc[i]);
    }	
	inb(VGA_INSTAT_READ);
    for(i=0;i<VGA_REGS_AC_COUNT;i++)
    {
        outb(VGA_AC_INDEX, i);
        outb(VGA_AC_WRITE, mode_regs.ac[i]);
    }
    inb(VGA_INSTAT_READ);
    outb(VGA_AC_INDEX, 0x20);	
}

void set_video_mode_12h()
{
	vbe_exit_mode();
	wait_for_vertical_retrace();
    set_video_mode_regs(vga_mode_regs_12h);
	setpalette16(vgaPalette);
}

void set_video_mode_13h()
{
	vbe_exit_mode();
	wait_for_vertical_retrace();
    set_video_mode_regs(vga_mode_regs_13h);
	int i;
	unsigned char *vga_13h = (unsigned char*)0xA0000;
	for(i=0;i<320*200;i++)
	{
		vga_13h[i] = 0;
	}
	setpalette16(vgaPalette);
}

void set_video_mode_03h()
{
	int i;
	unsigned char *vga_13h = (unsigned char*)0xA0000;
	for(i=0;i<320*200;i++)
	{
		vga_13h[i] = 0;
	}
	vbe_exit_mode();
	wait_for_vertical_retrace();
	set_video_mode_regs(vga_mode_regs_03h);
	setpalette16(vgaPalette);
	clrscr();
	setvgafont(vgafont16);    
}


char * itoa( int value, char * str, int base )
{
    char * rc;
    char * ptr;
    char * low;
    // Check for supported base.
    if ( base < 2 || base > 36 )
    {
        *str = '\0';
        return str;
    }
    rc = ptr = str;
    // Set '-' for negative decimals.
    if ( value < 0 && base == 10 )
    {
        *ptr++ = '-';
    }
    // Remember where the numbers start.
    low = ptr;
    // The actual conversion.
    do
    {
        // Modulo is negative for negative value. This trick makes abs() unnecessary.
        *ptr++ = "zyxwvutsrqponmlkjihgfedcba9876543210123456789abcdefghijklmnopqrstuvwxyz"[35 + value % base];
        value /= base;
    } while ( value );
    // Terminating the string.
    *ptr-- = '\0';
    // Invert the numbers.
    while ( low < ptr )
    {
        char tmp = *low;
        *low++ = *ptr;
        *ptr-- = tmp;
    }
    return rc;
}

char *itoa_s(unsigned long num, unsigned long base)
{
  static char hold[] = "0123456789ABCDEFGHIJKLMNOPQRTSUVWXYZ";
  static char buffer[50];
  char *str;

  str = &buffer[49];
  *str = '\0';

  do {
    *--str = hold[num % base];
    num /= base;
  } while (num != 0);

  return str;
}

typedef struct
{
	unsigned short mode;
	unsigned short width;
	unsigned short height;
	unsigned char depth;
} video_mode_t;

video_mode_t video_modes[] = 
{
//   mode     width    height    depth
	{0x03,       80,       25,       4},
	{0x12,      640,      480,       4},
	{0x13,      320,      200,       8},
	{0x100,     640,      480,       4},
	{0x101,     640,      480,       8},
	{0x102,     800,      600,       4},
	{0x103,     800,      600,       8},
	{0x10D,     320,      200,      15},
	{0x10E,     320,      200,      16},
	{0x10F,     320,      200,      24},
	{0x110,     640,      480,      15},
	{0x111,     640,      480,      16},
	{0x112,     640,      480,      24},
	{0x113,     800,      600,      15},
	{0x114,     800,      600,      16},
	{0x115,     800,      600,      24},
	{0x116,     1024,     768,      15},
	{0x117,     1024,     768,      16},
	{0x118,     1024,     768,      24},
	{0x119,     1280,    1024,      15},
	{0x11A,     1280,    1024,      16},
	{0x11B,     1280,    1024,      24},
	{0x11D,     1600,    1200,      15},
	{0x11E,     1600,    1200,      16},
	{0x11F,     1600,    1200,      24},
	{0x141,     640,      400,      32},
	{0x142,     640,      480,      32},
	{0x143,     800,      600,      32},
	{0x144,     1024,     768,      32},
	{0x145,     1280,    1024,      32},
	{0x147,     1600,    1200,      32},
	{0x149,     1152,     864,      15},
	{0x14a,     1152,     864,      16},
	{0x14b,     1152,     864,      24},
	{0x14c,     1152,     864,      32},
	{0x175,     1280,     768,      16},
	{0x176,     1280,     768,      24},
	{0x177,     1280,     768,      32},
	{0x178,     1280,     800,      16},
	{0x179,     1280,     800,      24},
	{0x17a,     1280,     800,      32},
	{0x17b,     1280,     960,      16},
	{0x17c,     1280,     960,      24},
	{0x17d,     1280,     960,      32},
	{0x17e,     1440,     900,      16},
	{0x17f,     1440,     900,      24},
	{0x180,     1440,     900,      32},
	{0x181,     1400,    1050,      16},
	{0x182,     1400,    1050,      24},
	{0x183,     1400,    1050,      32},
	{0x184,     1680,    1050,      16},
	{0x185,     1680,    1050,      24},
	{0x186,     1680,    1050,      32},
	{0x187,     1920,    1200,      16},
	{0x188,     1920,    1200,      24},
	{0x189,     1920,    1200,      32},
	{0x18a,     2560,    1600,      16},
	{0x18b,     2560,    1600,      24},
	{0x18c,     2560,    1600,      32},
	{0x18d,     1280,     720,      16},
	{0x18e,     1280,     720,      24},
	{0x18f,     1280,     720,      32},
	{0x190,     1920,    1080,      16},
	{0x191,     1920,    1080,      24},
	{0x192,     1920,    1080,      32}
};

unsigned short current_video_mode = 0x03;

void setvideomode(unsigned short mode)
{
	int video_mode_count = (sizeof(video_modes)/sizeof(video_mode_t));
	int i;
	current_video_mode = mode;
	for(i=0;i<video_mode_count;i++)
	{
		if (video_modes[i].mode == mode)
		{
			switch(video_modes[i].mode)
			{
				case 0x03:
				{
					set_video_mode_03h();
				};
				break;
				case 0x12:
				{
					set_video_mode_12h();
				};
				break;
				case 0x13:
				{
					set_video_mode_13h();
				};
				break;
				default:
				{
					vbe_exit_mode();
					wait_for_vertical_retrace();
					set_vbe_mode(video_modes[i].width, 
								 video_modes[i].height, 
								 video_modes[i].depth, 
								 1, 1);
					if ((mode >= 0x100) && (mode <= 0x103))
					{
						setpalette16(vgaPalette);
					}
				};
				break;
			};
		}
	}
}

unsigned short getvideowidth(void)
{
	int video_mode_count = (sizeof(video_modes)/sizeof(video_mode_t));
	int i;
	unsigned short width=0;
	if ((current_video_mode >= 0x03) && (current_video_mode <= 0x192))
	{
		for(i=0;i<video_mode_count;i++)
		{
			if (video_modes[i].mode == current_video_mode)
			{
				width = video_modes[i].width;
			}
		}			
	}
	return width;
}

unsigned short getvideoheight(void)
{
	int video_mode_count = (sizeof(video_modes)/sizeof(video_mode_t));
	int i;
	unsigned short height=0;
	if ((current_video_mode >= 0x03) && (current_video_mode <= 0x192))
	{
		for(i=0;i<video_mode_count;i++)
		{
			if (video_modes[i].mode == current_video_mode)
			{
				height = video_modes[i].height;
			}
		}			
	}
	return height;
}

unsigned char getvideodepth(void)
{
	int video_mode_count = (sizeof(video_modes)/sizeof(video_mode_t));
	int i;
	unsigned char bpp = vbe_read_reg(VBE_DISPI_INDEX_BPP);
	if ((bpp < 4) || (bpp > 32))
	{
		if ((current_video_mode >= 0x03) && (current_video_mode <= 0x192))
		{
			for(i=0;i<video_mode_count;i++)
			{
				if (video_modes[i].mode == current_video_mode)
				{
					bpp = video_modes[i].depth;
				}
			}			
		}
	}
	return bpp;
}

int main()
{
    int i;
	int scr_w,scr_h,scr_d,scr_b;
	print("Start Video Mode: 0x118\n");
	print("Press any key.");
	getch();
	print("\n");
	setvideomode(0x118);
	scr_w = getvideowidth();
	scr_h = getvideoheight();
	scr_d = getvideodepth();	
	scr_b = scr_d / 8;
	if (scr_b <= 0) scr_b = 1;	
	unsigned char *VGA1;
	int vmem = -0x3000000;
    VGA1 = (unsigned char*) vmem;	
	switch(scr_d)
	{
		case 4:
		{
			for(int y=10;y<110;y++)
			{
				for(int x=10;x<210;x++)
				{
					unsigned long ofs = ((scr_w*y)+x);
					unsigned long plan=ofs&0x03;
					ofs >>= 2;
					ofs+=plan;
					ofs &= 0xffff;
					VGA1[ofs] = 15;
				}		
			}
		};
		break;
		case 8:
		{
			for(i=0;i<scr_w*scr_h*scr_b;i++)
			{
				VGA1[i] = 1;
			}
			for(int y=10;y<110;y++)
			for(int x=10;x<110;x++)
			{
				VGA1[(scr_w*y)+x] = 15;
			}
		};
		break;
		case 15:
		case 16:
		{
			for(i=0;i<scr_w*scr_h*scr_b;i++)
			{
				VGA1[i*2+0] = 0xFF;
				VGA1[i*2+1] = 0x00;
			}
			for(int y=10;y<110;y++)
			for(int x=10;x<110;x++)
			{
				VGA1[((scr_w*y)+x)*2+0] = 0xFF;
				VGA1[((scr_w*y)+x)*2+1] = 0xFF;
			}	
		};
		break;
		case 24:
		{
			for(i=0;i<scr_w*scr_h*scr_b;i++)
			{
				VGA1[i*3+0] = 0xFF;
				VGA1[i*3+1] = 0x00;
				VGA1[i*3+2] = 0x00;
			}
			for(int y=10;y<110;y++)
			for(int x=10;x<110;x++)
			{
				VGA1[((scr_w*y)+x)*3+0] = 0xFF;
				VGA1[((scr_w*y)+x)*3+1] = 0xFF;
				VGA1[((scr_w*y)+x)*3+2] = 0xFF;
			}
		};
		break;
		case 32:
		{
			for(i=0;i<scr_w*scr_h*scr_b;i++)
			{
				VGA1[i*4+0] = 0xFF;
				VGA1[i*4+1] = 0x00;
				VGA1[i*4+2] = 0x00;
				VGA1[i*4+3] = 0x00;
			}
			for(int y=10;y<110;y++)
			for(int x=10;x<110;x++)
			{
				VGA1[((scr_w*y)+x)*4+0] = 0xFF;
				VGA1[((scr_w*y)+x)*4+1] = 0xFF;
				VGA1[((scr_w*y)+x)*4+2] = 0xFF;
				VGA1[((scr_w*y)+x)*4+3] = 0xFF;
			}
		};
		break;
		default:
		{
			for(i=0;i<scr_w*scr_h*scr_b;i++)
			{
				VGA1[i] = 1;
			}
			for(int y=10;y<110;y++)
			for(int x=10;x<110;x++)
			{
				VGA1[(scr_w*y)+x] = 15;
			}
		};
		break;
	};
	getch();
	setvideomode(0x03);
	print("Video Mode: 0x03\n");
	return 0;
}
